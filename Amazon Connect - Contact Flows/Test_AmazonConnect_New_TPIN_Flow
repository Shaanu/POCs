{"modules":[{"id":"a5377612-77c2-4e96-a653-fdfd99c95252","type":"PlayPrompt","branches":[{"condition":"Success","transition":"eccfd5ab-573a-413e-82ad-77566a7a5a3c"}],"parameters":[{"name":"Text","value":"Lambda returned $.External.Attempt attempt","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1100,"y":528},"useDynamic":false}},{"id":"eccfd5ab-573a-413e-82ad-77566a7a5a3c","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"LessThan","conditionValue":"3","transition":"ab407ee0-8b89-494e-8dae-3840289e80a9"},{"condition":"NoMatch","transition":"03832f1d-87c9-4548-a431-f410d3d9f9a2"}],"parameters":[{"name":"Attribute","value":"Attempt"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":1332,"y":517},"conditionMetadata":[{"id":"685a7a03-8d6c-49ce-a3be-cd8d396b6937","operator":{"name":"Is less than","value":"LessThan","shortDisplay":"<"},"value":"3"}]}},{"id":"7a726b68-ad77-4558-87e5-d6306df4b0aa","type":"PlayPrompt","branches":[{"condition":"Success","transition":"add0bea7-1a62-4d5f-9faf-f01f4d549a28"}],"parameters":[{"name":"Text","value":"Error TPIN mismatch","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":628,"y":557},"useDynamic":false}},{"id":"1214a98c-b8bf-423d-88d4-4ecb4eae4044","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"$.Attributes.FirstEnteredTPIN","transition":"2241299c-5de3-4247-a57a-1ecd28caf616"},{"condition":"NoMatch","transition":"7a726b68-ad77-4558-87e5-d6306df4b0aa"}],"parameters":[{"name":"Attribute","value":"Stored customer input"},{"name":"Namespace","value":"System"}],"metadata":{"position":{"x":1055,"y":12},"conditionMetadata":[{"id":"d9ce0016-2a92-4f17-90ac-caf587eb2889","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"$.Attributes.FirstEnteredTPIN"}]}},{"id":"2241299c-5de3-4247-a57a-1ecd28caf616","type":"PlayPrompt","branches":[{"condition":"Success","transition":"ad24590d-4d40-4203-b366-3851dd4de24d"}],"parameters":[{"name":"Text","value":"<speak><break time=\"1s\"/> Proceeding with the T PIN reset </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":1292,"y":23},"useDynamic":false}},{"id":"add0bea7-1a62-4d5f-9faf-f01f4d549a28","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"a5377612-77c2-4e96-a653-fdfd99c95252"},{"condition":"Error","transition":"95d7ad9d-8081-4cdd-bc52-bdf912d95fdc"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:978477803387:function:AmazonConnect_AttemptNumber"},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"AttemptNumber","value":"$.Attributes.AttemptNumber","namespace":null}],"metadata":{"position":{"x":862,"y":525},"dynamicMetadata":{"AttemptNumber":false}},"target":"Lambda"},{"id":"ad24590d-4d40-4203-b366-3851dd4de24d","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"2983293a-31fa-4906-99ef-5631e80b7f90"},{"condition":"Error","transition":"95d7ad9d-8081-4cdd-bc52-bdf912d95fdc"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:978477803387:function:AmazonConnect_UpdateTPIN"},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"EnteredTPIN","value":"Stored customer input","namespace":"System"}],"metadata":{"position":{"x":1523,"y":7},"dynamicMetadata":{"EnteredTPIN":true}},"target":"Lambda"},{"id":"03832f1d-87c9-4548-a431-f410d3d9f9a2","type":"PlayPrompt","branches":[{"condition":"Success","transition":"95d7ad9d-8081-4cdd-bc52-bdf912d95fdc"}],"parameters":[{"name":"Text","value":"<speak><break time=\"1s\"/> Sorry , you have exceeded the Number of Attempts , <break time=\"1ms\"/> disconnecting your call </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":1780,"y":336},"useDynamic":false}},{"id":"fbb234a9-c42e-4ed6-935b-b8c88c563e79","type":"SetAttributes","branches":[{"condition":"Success","transition":"2a7af286-363b-4cdd-8581-cf60937a4c69"},{"condition":"Error","transition":"95d7ad9d-8081-4cdd-bc52-bdf912d95fdc"}],"parameters":[{"name":"Attribute","value":"0","key":"AttemptNumber","namespace":null}],"metadata":{"position":{"x":184,"y":338}}},{"id":"ab407ee0-8b89-494e-8dae-3840289e80a9","type":"SetAttributes","branches":[{"condition":"Success","transition":"2a7af286-363b-4cdd-8581-cf60937a4c69"},{"condition":"Error","transition":"95d7ad9d-8081-4cdd-bc52-bdf912d95fdc"}],"parameters":[{"name":"Attribute","value":"$.External.Attempt","key":"AttemptNumber","namespace":null}],"metadata":{"position":{"x":1573,"y":512}}},{"id":"2a7af286-363b-4cdd-8581-cf60937a4c69","type":"StoreUserInput","branches":[{"condition":"Success","transition":"42aead10-f6e2-430e-b6f6-9150eeb0a202"},{"condition":"Error","transition":"95d7ad9d-8081-4cdd-bc52-bdf912d95fdc"}],"parameters":[{"name":"Text","value":"<speak>Please enter your 4-digit New Phone PIN</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"CustomerInputType","value":"Custom"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":4},{"name":"EncryptEntry","value":false}],"metadata":{"position":{"x":150,"y":10},"useDynamic":false,"useDynamicForEncryptionKeys":true,"countryCodePrefix":"+1"}},{"id":"942d63c4-9f52-4e18-b7d8-b18a2376342b","type":"SetAttributes","branches":[{"condition":"Success","transition":"1214a98c-b8bf-423d-88d4-4ecb4eae4044"},{"condition":"Error","transition":"95d7ad9d-8081-4cdd-bc52-bdf912d95fdc"}],"parameters":[{"name":"Attribute","value":"Stored customer input","key":"ReEnteredTPIN","namespace":"System"}],"metadata":{"position":{"x":827,"y":3}}},{"id":"42aead10-f6e2-430e-b6f6-9150eeb0a202","type":"SetAttributes","branches":[{"condition":"Success","transition":"54ef446c-87e6-4238-a41a-81ddd842bba6"},{"condition":"Error","transition":"95d7ad9d-8081-4cdd-bc52-bdf912d95fdc"}],"parameters":[{"name":"Attribute","value":"Stored customer input","key":"EnteredTPIN","namespace":"System"},{"name":"Attribute","value":"$.Attributes.EnteredTPIN","key":"FirstEnteredTPIN","namespace":null}],"metadata":{"position":{"x":376,"y":7}}},{"id":"54ef446c-87e6-4238-a41a-81ddd842bba6","type":"StoreUserInput","branches":[{"condition":"Success","transition":"942d63c4-9f52-4e18-b7d8-b18a2376342b"},{"condition":"Error","transition":"95d7ad9d-8081-4cdd-bc52-bdf912d95fdc"}],"parameters":[{"name":"Text","value":"<speak>Please re-enter your 4-digit New Phone PIN</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"CustomerInputType","value":"Custom"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":4},{"name":"EncryptEntry","value":false}],"metadata":{"position":{"x":602,"y":5},"useDynamic":false,"useDynamicForEncryptionKeys":true,"countryCodePrefix":"+1"}},{"id":"fbe780df-866e-444a-b799-2e8c318a99a2","type":"Transfer","branches":[{"condition":"Error","transition":"95d7ad9d-8081-4cdd-bc52-bdf912d95fdc"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/f39586ed-28a6-4751-8063-58cbd44f1238","resourceName":"Test_AmazonConnect_Fraud_Flow_New"}],"metadata":{"position":{"x":2281,"y":0},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/f39586ed-28a6-4751-8063-58cbd44f1238","text":"Test_AmazonConnect_Fraud_Flow_New","arn":null,"metricDetail":null,"resourceId":null}},"target":"Flow"},{"id":"0db9d32d-af53-4ce0-bc9a-0d61a43df49c","type":"Transfer","branches":[{"condition":"Error","transition":"95d7ad9d-8081-4cdd-bc52-bdf912d95fdc"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/0dd1c235-a0ae-457b-80a6-8639321ea5a0","resourceName":"Test_AmazonConnect_Main_Menu_Flow"}],"metadata":{"position":{"x":2608,"y":58},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/0dd1c235-a0ae-457b-80a6-8639321ea5a0","text":"Test_AmazonConnect_Main_Menu_Flow"}},"target":"Flow"},{"id":"95d7ad9d-8081-4cdd-bc52-bdf912d95fdc","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":2647,"y":224}}},{"id":"2983293a-31fa-4906-99ef-5631e80b7f90","type":"PlayPrompt","branches":[{"condition":"Success","transition":"ead70453-078a-4867-b53e-e6c5779abfeb"}],"parameters":[{"name":"Text","value":"<speak><break time=\"1s\"/> Phone PIN updated successfully </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":1754,"y":22},"useDynamic":false}},{"id":"ead70453-078a-4867-b53e-e6c5779abfeb","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Yes","transition":"fbe780df-866e-444a-b799-2e8c318a99a2"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"No","transition":"0db9d32d-af53-4ce0-bc9a-0d61a43df49c"},{"condition":"NoMatch","transition":"95d7ad9d-8081-4cdd-bc52-bdf912d95fdc"}],"parameters":[{"name":"Attribute","value":"isCustomerPresentInFraud"},{"name":"Namespace","value":"User Defined"}],"metadata":{"position":{"x":2009,"y":24},"conditionMetadata":[{"id":"46de86ca-6a69-43d4-8706-a4af54c70ddc","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Yes"},{"id":"e31a37b1-a69c-4092-9784-4178f4de8ddf","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"No"}]}}],"version":"1","type":"contactFlow","start":"fbb234a9-c42e-4ed6-935b-b8c88c563e79","metadata":{"entryPointPosition":{"x":-4,"y":346},"snapToGrid":false,"name":"Test_AmazonConnect_New_TPIN_Flow","description":null,"type":"contactFlow","status":"published","hash":"78460a6ba7f55e2857e2f4594a62b164b48d0e99644659af4e5500aeab443181"}}