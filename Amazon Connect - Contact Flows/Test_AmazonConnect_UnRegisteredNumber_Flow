{"modules":[{"id":"58018cb1-02c0-4cf0-872b-31914549004b","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"LessThan","conditionValue":"3","transition":"91c57264-b5e9-4dfc-a6b2-ecabc41a983f"},{"condition":"NoMatch","transition":"6c89ab4a-67dd-4440-9308-58da00b578b0"}],"parameters":[{"name":"Attribute","value":"Attempt"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":897,"y":392},"conditionMetadata":[{"id":"7d8eb4de-a8a2-4847-ad3f-8076286176e2","operator":{"name":"Is less than","value":"LessThan","shortDisplay":"<"},"value":"3"}]}},{"id":"6c89ab4a-67dd-4440-9308-58da00b578b0","type":"PlayPrompt","branches":[{"condition":"Success","transition":"4fcd29b9-80b4-4f34-b0fd-5b60d98ca938"}],"parameters":[{"name":"Text","value":"<speak><break time=\"1s\"/> I am sorry, but you have exceeded the number of attempts. And that is why, I am disconnecting this call </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":1412,"y":587},"useDynamic":false}},{"id":"02cfe00b-ce2c-4810-9cd8-99ad5932d478","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"256bc443-ff6a-43b8-8510-8830b803af3a"},{"condition":"Error","transition":"4fcd29b9-80b4-4f34-b0fd-5b60d98ca938"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:978477803387:function:AmazonConnect_FetchCustomerInfo_UnregisteredFlow"},{"name":"TimeLimit","value":"4"},{"name":"Parameter","key":"EnteredNumber","value":"$.Attributes.EnteredNumber","namespace":null}],"metadata":{"position":{"x":894,"y":143},"dynamicMetadata":{"EnteredNumber":false}},"target":"Lambda"},{"id":"256bc443-ff6a-43b8-8510-8830b803af3a","type":"SetAttributes","branches":[{"condition":"Success","transition":"e2508189-fcc9-420d-b2f5-0a0ae46ace55"},{"condition":"Error","transition":"4fcd29b9-80b4-4f34-b0fd-5b60d98ca938"}],"parameters":[{"name":"Attribute","value":"$.External.CustomerID","key":"CustomerID","namespace":null},{"name":"Attribute","value":"$.External.CustomerName","key":"CustomerName","namespace":null},{"name":"Attribute","value":"$.External.RegisteredNumber","key":"RegisteredNumber","namespace":null},{"name":"Attribute","value":"$.External.isRegisteredNumber","key":"isRegisteredNumber","namespace":null},{"name":"Attribute","value":"$.External.LastFourDigits","key":"LastFourDigits","namespace":null},{"name":"Attribute","value":"$.External.isCustomerPresentInFraud","key":"isCustomerPresentInFraud","namespace":null}],"metadata":{"position":{"x":1138,"y":143}}},{"id":"e2508189-fcc9-420d-b2f5-0a0ae46ace55","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Yes","transition":"7a5244f3-2568-4dff-ad58-f3ecff999c0a"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"No","transition":"c6940c51-833d-4be7-962b-60ee012789be"},{"condition":"NoMatch","transition":"4fcd29b9-80b4-4f34-b0fd-5b60d98ca938"}],"parameters":[{"name":"Attribute","value":"isEnteredNumberPresent"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":1379,"y":141},"conditionMetadata":[{"id":"55de291e-58d3-4c82-b561-156d3eb77c4d","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Yes"},{"id":"1505acdc-7ab8-4b4b-83fc-fe29a450fdfb","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"No"}]}},{"id":"7a5244f3-2568-4dff-ad58-f3ecff999c0a","type":"Transfer","branches":[{"condition":"Error","transition":"4fcd29b9-80b4-4f34-b0fd-5b60d98ca938"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/5a137b26-7f39-498e-bc02-ebb26e1754f5","resourceName":"Test_AmazonConnect_TPIN_Verification_Flow"}],"metadata":{"position":{"x":1628,"y":150},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/5a137b26-7f39-498e-bc02-ebb26e1754f5","text":"Test_AmazonConnect_TPIN_Verification_Flow"}},"target":"Flow"},{"id":"4fcd29b9-80b4-4f34-b0fd-5b60d98ca938","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1928,"y":358}}},{"id":"973608d3-eb78-426a-a1b0-30d3f771ccaa","type":"SetAttributes","branches":[{"condition":"Success","transition":"02cfe00b-ce2c-4810-9cd8-99ad5932d478"},{"condition":"Error","transition":"69f1be75-7b0e-4b41-a866-441c3d1c5abc"}],"parameters":[{"name":"Attribute","value":"Stored customer input","key":"EnteredNumber","namespace":"System"}],"metadata":{"position":{"x":657,"y":146}}},{"id":"c6940c51-833d-4be7-962b-60ee012789be","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"58018cb1-02c0-4cf0-872b-31914549004b"},{"condition":"Error","transition":"4fcd29b9-80b4-4f34-b0fd-5b60d98ca938"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:978477803387:function:AmazonConnect_AttemptNumber"},{"name":"TimeLimit","value":"4"},{"name":"Parameter","key":"AttemptNumber","value":"$.Attributes.AttemptNumber","namespace":null}],"metadata":{"position":{"x":657,"y":392},"dynamicMetadata":{"AttemptNumber":false}},"target":"Lambda"},{"id":"69f1be75-7b0e-4b41-a866-441c3d1c5abc","type":"PlayPrompt","branches":[{"condition":"Success","transition":"4fcd29b9-80b4-4f34-b0fd-5b60d98ca938"}],"parameters":[{"name":"Text","value":"<speak>We are facing some issues while storing the your input.</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":328,"y":513},"useDynamic":false}},{"id":"91c57264-b5e9-4dfc-a6b2-ecabc41a983f","type":"SetAttributes","branches":[{"condition":"Success","transition":"12968a1e-e147-4792-a042-fa5c2e0994fe"},{"condition":"Error","transition":"4fcd29b9-80b4-4f34-b0fd-5b60d98ca938"}],"parameters":[{"name":"Attribute","value":"$.External.Attempt","key":"AttemptNumber","namespace":null}],"metadata":{"position":{"x":1124,"y":394}}},{"id":"94b0684a-3087-44c7-9c35-fbf5ff6bf542","type":"SetAttributes","branches":[{"condition":"Success","transition":"12968a1e-e147-4792-a042-fa5c2e0994fe"},{"condition":"Error","transition":"4fcd29b9-80b4-4f34-b0fd-5b60d98ca938"}],"parameters":[{"name":"Attribute","value":"0","key":"AttemptNumber","namespace":null}],"metadata":{"position":{"x":166,"y":152}}},{"id":"12968a1e-e147-4792-a042-fa5c2e0994fe","type":"StoreUserInput","branches":[{"condition":"Success","transition":"973608d3-eb78-426a-a1b0-30d3f771ccaa"},{"condition":"InvalidNumber","transition":"c6940c51-833d-4be7-962b-60ee012789be"},{"condition":"Error","transition":"69f1be75-7b0e-4b41-a866-441c3d1c5abc"}],"parameters":[{"name":"Text","value":"<speak>Please enter Your 10-digit Registered Mobile Number</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"CustomerInputType","value":"PhoneNumber"},{"name":"Timeout","value":"5"},{"name":"PhoneNumberFormat","value":"Local"},{"name":"CountryCode","value":"US"}],"metadata":{"position":{"x":414,"y":139},"useDynamic":false,"useDynamicForEncryptionKeys":true,"countryCodePrefix":"+1"}}],"version":"1","type":"contactFlow","start":"94b0684a-3087-44c7-9c35-fbf5ff6bf542","metadata":{"entryPointPosition":{"x":20,"y":163},"snapToGrid":false,"name":"Test_AmazonConnect_UnRegisteredNumber_Flow","description":null,"type":"contactFlow","status":"published","hash":"92656f1d3127e4f680456377101c10ef8bd5565d100e1e92e0f0f4246235c1da"}}