{"modules":[{"id":"853c28d8-b289-4395-99be-1a7969cdedda","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"b8a175d6-aaaa-4a8c-a285-79a715db8275"},{"condition":"Error","transition":"c37bc4ec-1991-4883-8928-c0d601561fb7"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:978477803387:function:AmazonConnect_FetchCustomerName"},{"name":"TimeLimit","value":"5"}],"metadata":{"position":{"x":152,"y":180},"dynamicMetadata":{}},"target":"Lambda"},{"id":"c37bc4ec-1991-4883-8928-c0d601561fb7","type":"PlayPrompt","branches":[{"condition":"Success","transition":"6321d74a-b8f9-4dc5-9b4e-99cdb1c22332"}],"parameters":[{"name":"Text","value":"<speak><break time=\"1s\"/> I am sorry, there is some problem in Lambda Function. I am disconnecting this call. . .</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":394,"y":360},"useDynamic":false}},{"id":"a6007ad0-300c-44c6-80c7-b08a6f7540a5","type":"Transfer","branches":[{"condition":"Error","transition":"6321d74a-b8f9-4dc5-9b4e-99cdb1c22332"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/484c08ad-57cd-4098-87ba-2f02ffee3066","resourceName":"Test_AmazonConnect_Unregistered_Customer_Flow"}],"metadata":{"position":{"x":863,"y":10},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/484c08ad-57cd-4098-87ba-2f02ffee3066","text":"Test_AmazonConnect_Unregistered_Customer_Flow"}},"target":"Flow"},{"id":"b8a175d6-aaaa-4a8c-a285-79a715db8275","type":"SetAttributes","branches":[{"condition":"Success","transition":"117f5530-348d-4acf-98e3-f802259ccc49"},{"condition":"Error","transition":"6321d74a-b8f9-4dc5-9b4e-99cdb1c22332"}],"parameters":[{"name":"Attribute","value":"$.External.CustomerID","key":"CustomerID","namespace":null},{"name":"Attribute","value":"$.External.CustomerName","key":"CustomerName","namespace":null},{"name":"Attribute","value":"$.External.RegisteredNumber","key":"RegisteredNumber","namespace":null},{"name":"Attribute","value":"$.External.isRegisteredNumber","key":"isRegisteredNumber","namespace":null},{"name":"Attribute","value":"$.External.LastFourDigits","key":"LastFourDigits","namespace":null},{"name":"Attribute","value":"$.External.isCustomerPresentInFraud","key":"isCustomerPresentInFraud","namespace":null}],"metadata":{"position":{"x":393,"y":109}}},{"id":"117f5530-348d-4acf-98e3-f802259ccc49","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"No","transition":"a6007ad0-300c-44c6-80c7-b08a6f7540a5"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Yes","transition":"588ceb82-59d8-4cbb-b9f3-d485def05ff1"},{"condition":"NoMatch","transition":"6321d74a-b8f9-4dc5-9b4e-99cdb1c22332"}],"parameters":[{"name":"Attribute","value":"isRegisteredNumber"},{"name":"Namespace","value":"User Defined"}],"metadata":{"position":{"x":632,"y":103},"conditionMetadata":[{"id":"ac0d2d51-40e3-4beb-8629-ddc757478dfd","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"No"},{"id":"b5266fdd-a48a-4fe5-b325-23a876818bee","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Yes"}]}},{"id":"588ceb82-59d8-4cbb-b9f3-d485def05ff1","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"No","transition":"f6eb6bd0-0163-4b8e-9f15-71e4a47c825a"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Yes","transition":"6cf37fa9-a626-44b6-b048-e49ea89ba2d9"},{"condition":"NoMatch","transition":"6321d74a-b8f9-4dc5-9b4e-99cdb1c22332"}],"parameters":[{"name":"Attribute","value":"isCustomerPresentInFraud"},{"name":"Namespace","value":"User Defined"}],"metadata":{"position":{"x":865,"y":178},"conditionMetadata":[{"id":"6cf4feeb-423d-42f8-ac64-0540ec0a6c62","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"No"},{"id":"00e381f7-c7cc-4169-8d29-6ec793a1281f","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Yes"}]}},{"id":"6321d74a-b8f9-4dc5-9b4e-99cdb1c22332","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1677,"y":445}}},{"id":"f6eb6bd0-0163-4b8e-9f15-71e4a47c825a","type":"PlayPrompt","branches":[{"condition":"Success","transition":"04a82fbf-ff55-49eb-bf7b-5b06a905decb"}],"parameters":[{"name":"Text","value":"<speak><break time=\"11ms\"/>Hi<emphasis level=\"moderate\"> $.Attributes.CustomerName </emphasis>, <break time=\"1ms\"/> Thanks for calling. I hope you are doing great today.</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":1168,"y":124},"useDynamic":false}},{"id":"6cf37fa9-a626-44b6-b048-e49ea89ba2d9","type":"PlayPrompt","branches":[{"condition":"Success","transition":"04a82fbf-ff55-49eb-bf7b-5b06a905decb"}],"parameters":[{"name":"Text","value":"<speak><break time=\"11ms\"/>Hi<emphasis level=\"moderate\"> $.Attributes.CustomerName, </emphasis><break time=\"1ms\"/> thank you for calling us back regarding the fraudulent charge on your account.</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":1156,"y":305},"useDynamic":false}},{"id":"04a82fbf-ff55-49eb-bf7b-5b06a905decb","type":"Transfer","branches":[{"condition":"Error","transition":"6321d74a-b8f9-4dc5-9b4e-99cdb1c22332"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/5a137b26-7f39-498e-bc02-ebb26e1754f5","resourceName":"Test_AmazonConnect_TPIN_Verification_Flow"}],"metadata":{"position":{"x":1424,"y":272},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/5a137b26-7f39-498e-bc02-ebb26e1754f5","text":"Test_AmazonConnect_TPIN_Verification_Flow"}},"target":"Flow"}],"version":"1","type":"contactFlow","start":"853c28d8-b289-4395-99be-1a7969cdedda","metadata":{"entryPointPosition":{"x":7,"y":204},"snapToGrid":false,"name":"Test_AmazonConnect_Customer_Identification_Flow","description":null,"type":"contactFlow","status":"published","hash":"89389065810edf2042c3b01ef7c225a9caab77397ac20ab3bdb3ad9c27bfd26d"}}