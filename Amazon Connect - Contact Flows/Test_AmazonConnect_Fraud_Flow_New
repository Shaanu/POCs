{"modules":[{"id":"a2caf580-6eb4-43db-b07b-20127801e6d3","type":"PlayPrompt","branches":[{"condition":"Success","transition":"8be1ac4e-67dc-42a7-97ec-8866a4f05493"}],"parameters":[{"name":"Text","value":"<speak> You card ending with <prosody rate=\"medium\"> <say-as interpret-as=\"digits\"> $.Attributes.CardLastFourDigits </say-as> has been blocked successfully </prosody></speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":1422,"y":548},"useDynamic":false}},{"id":"2f6038ab-0b4f-4d1c-8848-6ec932a89a2f","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"LessThan","conditionValue":"3","transition":"e0a9d57b-74b4-45db-9946-ab986256401e"},{"condition":"NoMatch","transition":"14990a52-f8a1-41a0-ac04-aae0f6437854"}],"parameters":[{"name":"Attribute","value":"Attempt"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":2633,"y":838},"conditionMetadata":[{"id":"fc5816b9-f1ee-4bce-99ce-e0aba3e5d4af","operator":{"name":"Is less than","value":"LessThan","shortDisplay":"<"},"value":"3"}]}},{"id":"7b97620a-d42f-4cab-9bd6-decba7a40fe4","type":"PlayPrompt","branches":[{"condition":"Success","transition":"8482d757-283e-4296-bf5d-3d9981f4d91b"}],"parameters":[{"name":"Text","value":"<speak> <prosody rate=\"medium\" pitch=\"-2st\"> Entered last four digits of your card are not matching </prosody></speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":2162,"y":859},"useDynamic":false}},{"id":"45b32481-5ba2-4569-a998-5c9204cbeb73","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"$.Attributes.CardLastFourDigits","transition":"97f71e1d-28a5-4409-9d8b-e94bebf5b940"},{"condition":"NoMatch","transition":"7b97620a-d42f-4cab-9bd6-decba7a40fe4"}],"parameters":[{"name":"Attribute","value":"Stored customer input"},{"name":"Namespace","value":"System"}],"metadata":{"position":{"x":2415,"y":508},"conditionMetadata":[{"id":"fefa309c-d225-42a7-832f-1ae200bcacd8","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"$.Attributes.CardLastFourDigits"}]}},{"id":"9d875986-3f9e-4664-abde-f4d06675839e","type":"PlayPrompt","branches":[{"condition":"Success","transition":"f0c442b2-7556-495c-af21-fbe10d3644ba"}],"parameters":[{"name":"Text","value":"<speak> We have received your request for a new card.You will receive a message for the same shortly</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":2917,"y":524},"useDynamic":false}},{"id":"6f6b1278-1f56-4e08-a0b9-bac1ec30543e","type":"PlayPrompt","branches":[{"condition":"Success","transition":"f0c442b2-7556-495c-af21-fbe10d3644ba"}],"parameters":[{"name":"Text","value":"Okay, we are not blocking your card.","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":1431,"y":900},"useDynamic":false}},{"id":"9f9d2536-eeb4-4405-98ed-261f05b6ce72","type":"Transfer","branches":[{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/7349b385-6515-4443-ad54-af6938f8c74f","resourceName":"Test_AmazonConnect_Future_Flow"}],"metadata":{"position":{"x":1011,"y":247},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/7349b385-6515-4443-ad54-af6938f8c74f","text":"Test_AmazonConnect_Future_Flow"}},"target":"Flow"},{"id":"14990a52-f8a1-41a0-ac04-aae0f6437854","type":"PlayPrompt","branches":[{"condition":"Success","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"Text","value":"<speak> I am sorry but you have exceeded the number of attempts. And that is why, I am disconnecting the call </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":2804,"y":1120},"useDynamic":false}},{"id":"579de21e-4b4f-41b5-b8e6-bbe8fdeda9e1","type":"Transfer","branches":[{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/7349b385-6515-4443-ad54-af6938f8c74f","resourceName":"Test_AmazonConnect_Future_Flow"}],"metadata":{"position":{"x":745,"y":37},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/7349b385-6515-4443-ad54-af6938f8c74f","text":"Test_AmazonConnect_Future_Flow"}},"target":"Flow"},{"id":"8482d757-283e-4296-bf5d-3d9981f4d91b","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"2f6038ab-0b4f-4d1c-8848-6ec932a89a2f"},{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:978477803387:function:AmazonConnect_AttemptNumber"},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"AttemptNumber","value":"$.Attributes.AttemptNumber","namespace":null}],"metadata":{"position":{"x":2398,"y":837},"dynamicMetadata":{"AttemptNumber":false}},"target":"Lambda"},{"id":"43471849-b687-4b96-ad06-015f71d6775f","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"a2caf580-6eb4-43db-b07b-20127801e6d3"},{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:978477803387:function:AmazonConnect_CustomerCardBlock"},{"name":"TimeLimit","value":"3"}],"metadata":{"position":{"x":1191,"y":542},"dynamicMetadata":{}},"target":"Lambda"},{"id":"d4b5b083-acfd-4bea-81b7-0a2bdd2c30ad","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"No","transition":"247aeef0-b547-458e-904d-1814ff3751ea"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Yes","transition":"6f6b1278-1f56-4e08-a0b9-bac1ec30543e"},{"condition":"NoMatch","transition":"edca01df-c3af-40bb-b153-730f07103b0f"},{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"Text","value":"<speak>We would recommend you to block this card immediately as you have recognized an authorized charge. Are you sure you do not want to block this card ? </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"BotName","value":"AmazonConnect_TPIN_Confirmation_Bot"},{"name":"BotAlias","value":"TPIN_Confirmation_Prod"}],"metadata":{"position":{"x":1196,"y":865},"conditionMetadata":[{"id":"abd211ec-d869-44d8-99f0-f8ddf8d5eb6f","value":"No"},{"id":"e60d9c56-f778-492d-a05a-a29ac9f63d5e","value":"Yes"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"0062dbde-52b8-43b3-8e4f-9af697dbf439","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"No","transition":"9f9d2536-eeb4-4405-98ed-261f05b6ce72"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Yes","transition":"247aeef0-b547-458e-904d-1814ff3751ea"},{"condition":"NoMatch","transition":"edca01df-c3af-40bb-b153-730f07103b0f"},{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"Text","value":"<speak> Thank you! You made a great choice by calling us about this unauthorized charge. Can you please confirm if you and any additional card holders have had their credit card in possession all the time?</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"BotName","value":"AmazonConnect_TPIN_Confirmation_Bot"},{"name":"BotAlias","value":"TPIN_Confirmation_Prod"}],"metadata":{"position":{"x":748,"y":240},"conditionMetadata":[{"id":"37df66b4-b346-4f13-9fe0-85a994eaa97a","value":"No"},{"id":"70611d70-0e41-47df-8f29-1eacb4c7f2fd","value":"Yes"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"247aeef0-b547-458e-904d-1814ff3751ea","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Yes","transition":"43471849-b687-4b96-ad06-015f71d6775f"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"No","transition":"d4b5b083-acfd-4bea-81b7-0a2bdd2c30ad"},{"condition":"NoMatch","transition":"edca01df-c3af-40bb-b153-730f07103b0f"},{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"Text","value":"<speak> Thank you for confirming. Would you like me to block your credit card to prevent additional unauthorized charges? </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"BotName","value":"AmazonConnect_TPIN_Confirmation_Bot"},{"name":"BotAlias","value":"TPIN_Confirmation_Prod"}],"metadata":{"position":{"x":956,"y":539},"conditionMetadata":[{"id":"2d26e93e-d825-4ac0-b112-bcd610678271","value":"Yes"},{"id":"2600c029-d905-40cc-9559-258ff7286832","value":"No"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"e0a9d57b-74b4-45db-9946-ab986256401e","type":"SetAttributes","branches":[{"condition":"Success","transition":"7128dec7-c03f-4e35-929c-a9087ca6678f"},{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"Attribute","value":"$.External.Attempt","key":"AttemptNumber","namespace":null}],"metadata":{"position":{"x":2879,"y":839}}},{"id":"68ddf678-801e-48b7-b98c-79444928df97","type":"SetAttributes","branches":[{"condition":"Success","transition":"7128dec7-c03f-4e35-929c-a9087ca6678f"},{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"Attribute","value":"0","key":"AttemptNumber","namespace":null}],"metadata":{"position":{"x":1902,"y":515}}},{"id":"7128dec7-c03f-4e35-929c-a9087ca6678f","type":"StoreUserInput","branches":[{"condition":"Success","transition":"45b32481-5ba2-4569-a998-5c9204cbeb73"},{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"Text","value":"<speak>Please confirm the last 4-digits of the card you want to order </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"CustomerInputType","value":"Custom"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":4},{"name":"EncryptEntry","value":false}],"metadata":{"position":{"x":2163,"y":510},"useDynamic":false,"useDynamicForEncryptionKeys":true,"countryCodePrefix":"+1"}},{"id":"97f71e1d-28a5-4409-9d8b-e94bebf5b940","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"9d875986-3f9e-4664-abde-f4d06675839e"},{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:978477803387:function:AmazonConnect_NewCard"},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"CardLastFourDigits","value":"$.Attributes.CardLastFourDigits","namespace":null}],"metadata":{"position":{"x":2666,"y":514},"dynamicMetadata":{"CardLastFourDigits":false}},"target":"Lambda"},{"id":"63b4b678-54e3-4d51-b497-b7435009fefd","type":"Transfer","branches":[{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/0dd1c235-a0ae-457b-80a6-8639321ea5a0","resourceName":"Test_AmazonConnect_Main_Menu_Flow"}],"metadata":{"position":{"x":1940,"y":968},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/0dd1c235-a0ae-457b-80a6-8639321ea5a0","text":"Test_AmazonConnect_Main_Menu_Flow"}},"target":"Flow"},{"id":"8be1ac4e-67dc-42a7-97ec-8866a4f05493","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Yes","transition":"68ddf678-801e-48b7-b98c-79444928df97"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"No","transition":"f0c442b2-7556-495c-af21-fbe10d3644ba"},{"condition":"NoMatch","transition":"edca01df-c3af-40bb-b153-730f07103b0f"},{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"Text","value":"<speak> Do you want us to order a new card for you? </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"BotName","value":"AmazonConnect_TPIN_Confirmation_Bot"},{"name":"BotAlias","value":"TPIN_Confirmation_Prod"}],"metadata":{"position":{"x":1657,"y":508},"conditionMetadata":[{"id":"a412e8d7-5c04-467a-a8dd-72d98c587166","value":"Yes"},{"id":"71edf5d3-ff79-448e-be3e-e3cad647d0e8","value":"No"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"f0c442b2-7556-495c-af21-fbe10d3644ba","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"No","transition":"edca01df-c3af-40bb-b153-730f07103b0f"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Yes","transition":"63b4b678-54e3-4d51-b497-b7435009fefd"},{"condition":"NoMatch","transition":"edca01df-c3af-40bb-b153-730f07103b0f"},{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"Text","value":"<speak>Do you want to use our banking services?</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"BotName","value":"AmazonConnect_TPIN_Confirmation_Bot"},{"name":"BotAlias","value":"TPIN_Confirmation_Prod"}],"metadata":{"position":{"x":1686,"y":869},"conditionMetadata":[{"id":"a1ba0ae5-27d6-41b7-a1bd-a09719b68e5e","value":"No"},{"id":"c9557683-ce99-42e3-b8fd-e8040069bd36","value":"Yes"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"e24283d6-70e9-4df1-bca4-d0eb55827c2e","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"272e3e73-b6f5-4cd9-9984-4f2de5a46b8c"},{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:978477803387:function:AmazonConnect_FraudInformationFetcher"},{"name":"TimeLimit","value":"4"}],"metadata":{"position":{"x":38,"y":250},"dynamicMetadata":{}},"target":"Lambda"},{"id":"80d60cf2-af81-44e7-9cbc-fcf8df679bb0","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Yes","transition":"579de21e-4b4f-41b5-b8e6-bbe8fdeda9e1"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"No","transition":"0062dbde-52b8-43b3-8e4f-9af697dbf439"},{"condition":"NoMatch","transition":"edca01df-c3af-40bb-b153-730f07103b0f"},{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"Text","value":"<speak>  Hi $.Attributes.CustomerName , there is a charge of $.Attributes.Amount dollars on your account ending with <say-as interpret-as=\"digits\"> $.Attributes.CardLastFourDigits </say-as> at  $.Attributes.Merchant on $.Attributes.Date at $.Attributes.Time . Do you recognize this charge?</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"BotName","value":"AmazonConnect_TPIN_Confirmation_Bot"},{"name":"BotAlias","value":"TPIN_Confirmation_Prod"}],"metadata":{"position":{"x":492,"y":239},"conditionMetadata":[{"id":"effcb9b5-479b-4462-874f-e5120a99ef34","value":"Yes"},{"id":"6411342e-1e7f-4047-aea9-f82c801301ff","value":"No"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"272e3e73-b6f5-4cd9-9984-4f2de5a46b8c","type":"SetAttributes","branches":[{"condition":"Success","transition":"80d60cf2-af81-44e7-9cbc-fcf8df679bb0"},{"condition":"Error","transition":"edca01df-c3af-40bb-b153-730f07103b0f"}],"parameters":[{"name":"Attribute","value":"$.External.CustomerName","key":"CustomerName","namespace":null},{"name":"Attribute","value":"$.External.Amount","key":"Amount","namespace":null},{"name":"Attribute","value":"$.External.Date","key":"Date","namespace":null},{"name":"Attribute","value":"$.External.Time","key":"Time","namespace":null},{"name":"Attribute","value":"$.External.Merchant","key":"Merchant","namespace":null},{"name":"Attribute","value":"$.External.CardLastFourDigits","key":"CardLastFourDigits","namespace":null}],"metadata":{"position":{"x":264,"y":261}}},{"id":"edca01df-c3af-40bb-b153-730f07103b0f","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":3753,"y":417}}}],"version":"1","type":"contactFlow","start":"e24283d6-70e9-4df1-bca4-d0eb55827c2e","metadata":{"entryPointPosition":{"x":20,"y":30},"snapToGrid":false,"name":"Test_AmazonConnect_Fraud_Flow_New","description":null,"type":"contactFlow","status":"published","hash":"471b81825676dd1ec7676cce6db2838e0b422f5ba45754166e8c32815dbaf119"}}