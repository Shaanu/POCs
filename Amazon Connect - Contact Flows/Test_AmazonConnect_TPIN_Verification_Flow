{"modules":[{"id":"0719aa92-13ec-437c-a0db-c5881b265e80","type":"SetAttributes","branches":[{"condition":"Success","transition":"e97ce165-1b30-4f95-9c7c-a429e301760e"},{"condition":"Error","transition":"3ab366e0-3232-4d63-a4b0-f5b3a6f276bf"}],"parameters":[{"name":"Attribute","value":"0","key":"AttemptNumber","namespace":null}],"metadata":{"position":{"x":164,"y":53}}},{"id":"71f202d9-c16f-46fb-ba4b-1bd443d4ff3f","type":"SetAttributes","branches":[{"condition":"Success","transition":"e93f0ee8-4ba2-42cf-a23d-b78484520efc"},{"condition":"Error","transition":"3ab366e0-3232-4d63-a4b0-f5b3a6f276bf"}],"parameters":[{"name":"Attribute","value":"Stored customer input","key":"EnteredTPIN","namespace":"System"}],"metadata":{"position":{"x":645,"y":47}}},{"id":"fbbc82ee-c460-452d-a89d-e5bbdd212365","type":"PlayPrompt","branches":[{"condition":"Success","transition":"afda81d6-52e1-47dc-b261-301bd71191bf"}],"parameters":[{"name":"Text","value":"<speak>The Phone PIN you have entered is \n<say-as interpret-as=\"digits\">$.Attributes.EnteredTPIN </say-as>\n</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":1120,"y":44},"useDynamic":false}},{"id":"afda81d6-52e1-47dc-b261-301bd71191bf","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"0610082f-b33d-4e88-b84a-dc411d5e5a44"},{"condition":"Error","transition":"3ab366e0-3232-4d63-a4b0-f5b3a6f276bf"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:978477803387:function:AmazonConnect_TpinVerify"},{"name":"TimeLimit","value":"5"},{"name":"Parameter","key":"EnteredTPIN","value":"Stored customer input","namespace":"System"}],"metadata":{"position":{"x":1354,"y":37},"dynamicMetadata":{"EnteredTPIN":true}},"target":"Lambda"},{"id":"0610082f-b33d-4e88-b84a-dc411d5e5a44","type":"SetAttributes","branches":[{"condition":"Success","transition":"93e44944-b322-4103-ba02-557e5f5289c8"},{"condition":"Error","transition":"3ab366e0-3232-4d63-a4b0-f5b3a6f276bf"}],"parameters":[{"name":"Attribute","value":"$.External.isTPINVerified","key":"TPINVerified","namespace":null},{"name":"Attribute","value":"$.Attributes.TPINVerified","key":"isTPINVerified","namespace":null}],"metadata":{"position":{"x":1582,"y":44}}},{"id":"7c968684-b773-47e8-9937-86f108f711a3","type":"PlayPrompt","branches":[{"condition":"Success","transition":"9ed4c229-d98e-46f7-9637-12b6b5353679"}],"parameters":[{"name":"Text","value":"<speak><break time=\"1ms\"/> <emphasis level=\"moderate\"> Phone PIN verified successfully </emphasis> </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":2071,"y":44},"useDynamic":false}},{"id":"08755d13-0e8d-4eac-908f-b49fe1179c47","type":"Transfer","branches":[{"condition":"Error","transition":"3ab366e0-3232-4d63-a4b0-f5b3a6f276bf"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/f39586ed-28a6-4751-8063-58cbd44f1238","resourceName":"Test_AmazonConnect_Fraud_Flow_New"}],"metadata":{"position":{"x":2569,"y":33},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/f39586ed-28a6-4751-8063-58cbd44f1238","text":"Test_AmazonConnect_Fraud_Flow_New"}},"target":"Flow"},{"id":"9ed4c229-d98e-46f7-9637-12b6b5353679","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Yes","transition":"08755d13-0e8d-4eac-908f-b49fe1179c47"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"No","transition":"ca66164b-b7ec-4c03-959c-023d5966dcec"},{"condition":"NoMatch","transition":"3ab366e0-3232-4d63-a4b0-f5b3a6f276bf"}],"parameters":[{"name":"Attribute","value":"isCustomerPresentInFraud"},{"name":"Namespace","value":"User Defined"}],"metadata":{"position":{"x":2320,"y":35},"conditionMetadata":[{"id":"074950f9-f2ae-4fc8-9036-9cc2306fd61a","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Yes"},{"id":"69de1095-d765-49e7-a99e-35143ffded4d","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"No"}]}},{"id":"ca66164b-b7ec-4c03-959c-023d5966dcec","type":"Transfer","branches":[{"condition":"Error","transition":"3ab366e0-3232-4d63-a4b0-f5b3a6f276bf"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/0dd1c235-a0ae-457b-80a6-8639321ea5a0","resourceName":"Test_AmazonConnect_Main_Menu_Flow"}],"metadata":{"position":{"x":2566,"y":212},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/0dd1c235-a0ae-457b-80a6-8639321ea5a0","text":"Test_AmazonConnect_Main_Menu_Flow"}},"target":"Flow"},{"id":"e93f0ee8-4ba2-42cf-a23d-b78484520efc","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"*","transition":"843b9da2-c672-4bca-bec2-16256e85809c"},{"condition":"NoMatch","transition":"fbbc82ee-c460-452d-a89d-e5bbdd212365"}],"parameters":[{"name":"Attribute","value":"Stored customer input"},{"name":"Namespace","value":"System"}],"metadata":{"position":{"x":886,"y":44},"conditionMetadata":[{"id":"46bc5d50-5a90-4306-872a-53bd35767c4d","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"*"}]}},{"id":"843b9da2-c672-4bca-bec2-16256e85809c","type":"Transfer","branches":[{"condition":"Error","transition":"3ab366e0-3232-4d63-a4b0-f5b3a6f276bf"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/d96cbb08-4984-4674-a871-c689be10db40","resourceName":"Test_AmazonConnect_TPIN_Reset_Flow"}],"metadata":{"position":{"x":951,"y":347},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/d96cbb08-4984-4674-a871-c689be10db40","text":"Test_AmazonConnect_TPIN_Reset_Flow"}},"target":"Flow"},{"id":"93e44944-b322-4103-ba02-557e5f5289c8","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Yes","transition":"7c968684-b773-47e8-9937-86f108f711a3"},{"condition":"NoMatch","transition":"386faf9a-4d03-47fe-a4c7-956827c6ad24"}],"parameters":[{"name":"Attribute","value":"isTPINVerified"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":1829,"y":41},"conditionMetadata":[{"id":"fb5861fe-70ed-468b-a792-ba54ee3af691","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Yes"}]}},{"id":"386faf9a-4d03-47fe-a4c7-956827c6ad24","type":"PlayPrompt","branches":[{"condition":"Success","transition":"d71dba8a-e2dd-406d-b873-b147690ff197"}],"parameters":[{"name":"Text","value":"<speak><break time=\"1ms\"/> <emphasis level=\"moderate\"> Error </emphasis>, Phone PIN not verified</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":1335,"y":356},"useDynamic":false}},{"id":"d71dba8a-e2dd-406d-b873-b147690ff197","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"07cdea0f-50b0-4444-b337-a3dc3e41c887"},{"condition":"Error","transition":"3ab366e0-3232-4d63-a4b0-f5b3a6f276bf"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:978477803387:function:AmazonConnect_AttemptNumber"},{"name":"TimeLimit","value":"5"},{"name":"Parameter","key":"AttemptNumber","value":"$.Attributes.AttemptNumber","namespace":null}],"metadata":{"position":{"x":1573,"y":344},"dynamicMetadata":{"AttemptNumber":false}},"target":"Lambda"},{"id":"e97ce165-1b30-4f95-9c7c-a429e301760e","type":"StoreUserInput","branches":[{"condition":"Success","transition":"71f202d9-c16f-46fb-ba4b-1bd443d4ff3f"},{"condition":"Error","transition":"3ab366e0-3232-4d63-a4b0-f5b3a6f276bf"}],"parameters":[{"name":"Text","value":"<speak>For your security, can you please enter your Phone PIN? If you do not remember your PIN or would like to reset it, please press star now </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"CustomerInputType","value":"Custom"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":4},{"name":"EncryptEntry","value":false}],"metadata":{"position":{"x":409,"y":53},"useDynamic":false,"useDynamicForEncryptionKeys":true,"countryCodePrefix":"+1"}},{"id":"2223fd18-6509-48de-bd7d-0e1516ee9f5e","type":"SetAttributes","branches":[{"condition":"Success","transition":"e97ce165-1b30-4f95-9c7c-a429e301760e"},{"condition":"Error","transition":"3ab366e0-3232-4d63-a4b0-f5b3a6f276bf"}],"parameters":[{"name":"Attribute","value":"$.External.Attempt","key":"AttemptNumber","namespace":null}],"metadata":{"position":{"x":2083,"y":339}}},{"id":"07cdea0f-50b0-4444-b337-a3dc3e41c887","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"LessThan","conditionValue":"3","transition":"2223fd18-6509-48de-bd7d-0e1516ee9f5e"},{"condition":"NoMatch","transition":"0228ece0-129a-4078-b3fe-6abee9420f46"}],"parameters":[{"name":"Attribute","value":"Attempt"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":1835,"y":345},"conditionMetadata":[{"id":"444109c2-c28b-4a60-8269-01877ad7d6fd","operator":{"name":"Is less than","value":"LessThan","shortDisplay":"<"},"value":"3"}]}},{"id":"3ab366e0-3232-4d63-a4b0-f5b3a6f276bf","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":2988,"y":523}}},{"id":"0228ece0-129a-4078-b3fe-6abee9420f46","type":"PlayPrompt","branches":[{"condition":"Success","transition":"0d93896b-3de5-4bef-bf66-fb0ee1103a22"}],"parameters":[{"name":"Text","value":"<speak><break time=\"1s\"/> I am sorry, but you have exceeded the number of attempts.</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":2085,"y":576},"useDynamic":false}},{"id":"0d93896b-3de5-4bef-bf66-fb0ee1103a22","type":"Transfer","branches":[{"condition":"Error","transition":"3ab366e0-3232-4d63-a4b0-f5b3a6f276bf"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/d96cbb08-4984-4674-a871-c689be10db40","resourceName":"Test_AmazonConnect_TPIN_Reset_Flow"}],"metadata":{"position":{"x":2327,"y":589},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-east-1:978477803387:instance/f8c3d4f8-7e27-4834-a0d2-727815ad37e1/contact-flow/d96cbb08-4984-4674-a871-c689be10db40","text":"Test_AmazonConnect_TPIN_Reset_Flow"}},"target":"Flow"}],"version":"1","type":"contactFlow","start":"0719aa92-13ec-437c-a0db-c5881b265e80","metadata":{"entryPointPosition":{"x":20,"y":73},"snapToGrid":false,"name":"Test_AmazonConnect_TPIN_Verification_Flow","description":null,"type":"contactFlow","status":"published","hash":"8c07d707d1cca7306c1de73af99f5d7592f65c1ced2d63d1f901f1144db41bbc"}}